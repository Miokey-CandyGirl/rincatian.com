<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§ª è¯­æ³•é¡µé¢åŠŸèƒ½æµ‹è¯•</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="grammar.css">
    <link rel="stylesheet" href="grammar-style.css">
    <link rel="stylesheet" href="exercise-style.css">
    <style>
        .test-status {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px;
            border-radius: 10px;
            z-index: 10000;
            max-width: 300px;
            font-size: 14px;
        }
        
        .test-item {
            margin: 5px 0;
            padding: 5px;
            border-radius: 5px;
        }
        
        .test-pass { background: rgba(40, 167, 69, 0.3); }
        .test-fail { background: rgba(220, 53, 69, 0.3); }
        .test-info { background: rgba(23, 162, 184, 0.3); }
        
        .test-controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 10000;
        }
        
        .test-btn {
            margin: 5px;
            padding: 10px 15px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="starfield" id="starfield"></div>
    
    <!-- æµ‹è¯•çŠ¶æ€æ˜¾ç¤º -->
    <div class="test-status" id="testStatus">
        <h4>ğŸ§ª æµ‹è¯•çŠ¶æ€</h4>
        <div id="testResults"></div>
    </div>
    
    <!-- æµ‹è¯•æ§åˆ¶ -->
    <div class="test-controls">
        <button class="test-btn" onclick="runAllTests()">ğŸš€ è¿è¡Œæ‰€æœ‰æµ‹è¯•</button>
        <button class="test-btn" onclick="testStarRotation()">â­ æµ‹è¯•æ˜Ÿæ˜Ÿæ—‹è½¬</button>
        <button class="test-btn" onclick="testExerciseFlow()">ğŸ¯ æµ‹è¯•ç»ƒä¹ æµç¨‹</button>
    </div>
    
    <header class="header">
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-logo">
                    <div class="planet-icon"></div>
                    <div class="logo-text">
                        <span class="logo-chinese">è¯­æ³•æµ‹è¯•é¡µé¢</span>
                        <span class="logo-english">Grammar Test</span>
                    </div>
                </div>
                <div class="nav-extras">
                    <div class="auth-buttons">
                        <button class="btn btn-outline btn-small" id="loginBtn">ç™»å½•</button>
                        <button class="btn btn-primary btn-small" id="registerBtn">æ³¨å†Œ</button>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <section class="grammar-hero">
            <div class="container">
                <h1 class="page-title">ğŸ§ª è¯­æ³•åŠŸèƒ½æµ‹è¯•</h1>
                <p class="page-subtitle">æµ‹è¯•æ˜Ÿæ˜Ÿæ—‹è½¬ã€æŒ‰é’®æ ·å¼å’Œç»ƒä¹ æµç¨‹</p>
            </div>
        </section>

        <section class="grammar-navigation">
            <div class="container">
                <div class="grammar-tabs">
                    <button class="tab-btn active" onclick="showGrammarSection('phonetics')">ğŸ”¤ è¯­éŸ³æ–‡å­—</button>
                    <button class="tab-btn" onclick="showGrammarSection('morphology')">ğŸ“ è¯æ³•æ¦‚è¿°</button>
                    <button class="tab-btn" onclick="showGrammarSection('syntax')">âš¡ æ ¸å¿ƒå¥æ³•</button>
                    <button class="tab-btn" onclick="showGrammarSection('exercises')">ğŸ¯ å°è¯•ç‰›åˆ€</button>
                </div>
            </div>
        </section>

        <section class="grammar-content">
            <div class="container">
                <!-- è¯­éŸ³æ–‡å­— -->
                <div id="phonetics" class="grammar-section active">
                    <h2 class="section-title">ğŸ”¤ æµ‹è¯•é¡µé¢</h2>
                    <div class="grammar-card">
                        <h3>æµ‹è¯•é¡¹ç›®</h3>
                        <ul>
                            <li>âœ… æ˜Ÿæ˜Ÿæ—‹è½¬åŠ¨ç”»</li>
                            <li>âœ… é€‰é¡¹å¡åˆ‡æ¢æ•ˆæœ</li>
                            <li>âœ… ç™»å½•æ³¨å†ŒæŒ‰é’®æ ·å¼</li>
                            <li>âœ… ç»ƒä¹ ç³»ç»Ÿå®Œæ•´æµç¨‹</li>
                        </ul>
                    </div>
                </div>

                <!-- å°è¯•ç‰›åˆ€ -->
                <div id="exercises" class="grammar-section">
                    <h2 class="section-title">ğŸ¯ å°è¯•ç‰›åˆ€</h2>
                    <p class="section-subtitle">å®Œæ•´çš„ç»ƒä¹ æµç¨‹æµ‹è¯•</p>
                    
                    <!-- ç»ƒä¹ å¯¼èˆª -->
                    <div class="exercise-navigation">
                        <div class="exercise-tabs">
                            <button class="exercise-tab-btn active" onclick="showExerciseType('choice')">ğŸ¯ é€‰æ‹©é¢˜</button>
                            <button class="exercise-tab-btn" onclick="showExerciseType('judge')">âœ… åˆ¤æ–­é¢˜</button>
                            <button class="exercise-tab-btn" onclick="showExerciseType('fill')">ğŸ“ å¡«ç©ºé¢˜</button>
                            <button class="exercise-tab-btn" onclick="showExerciseType('translate')">ğŸŒ ç¿»è¯‘é¢˜</button>
                            <button class="exercise-tab-btn" onclick="showExerciseType('magic')">ğŸ”® é­”æ³•ç»ƒä¹ </button>
                        </div>
                    </div>
                    
                    <!-- é€‰æ‹©é¢˜ -->
                    <div id="choice-exercises" class="exercise-type-section active">
                        <div class="grammar-card">
                            <h3>ğŸ¯ é€‰æ‹©é¢˜ç»ƒä¹ </h3>
                            <div class="exercise-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" id="choiceProgress"></div>
                                </div>
                                <span class="progress-text" id="choiceProgressText">0/10</span>
                            </div>
                            <div class="exercise-container" id="choiceContainer"></div>
                            <div class="exercise-controls">
                                <button class="btn btn-primary" id="choiceNextBtn" onclick="nextChoiceQuestion()" disabled>ä¸‹ä¸€é¢˜</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- åˆ¤æ–­é¢˜ -->
                    <div id="judge-exercises" class="exercise-type-section">
                        <div class="grammar-card">
                            <h3>âœ… åˆ¤æ–­é¢˜ç»ƒä¹ </h3>
                            <div class="exercise-container" id="judgeContainer"></div>
                            <div class="exercise-controls">
                                <button class="btn btn-primary" id="judgeNextBtn" onclick="nextJudgeQuestion()">å¼€å§‹åˆ¤æ–­é¢˜</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- å¡«ç©ºé¢˜ -->
                    <div id="fill-exercises" class="exercise-type-section">
                        <div class="grammar-card">
                            <h3>ğŸ“ å¡«ç©ºé¢˜ç»ƒä¹ </h3>
                            <div class="exercise-container" id="fillContainer"></div>
                            <div class="exercise-controls">
                                <button class="btn btn-primary" id="fillNextBtn" onclick="nextFillQuestion()">å¼€å§‹å¡«ç©ºé¢˜</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ç¿»è¯‘é¢˜ -->
                    <div id="translate-exercises" class="exercise-type-section">
                        <div class="grammar-card">
                            <h3>ğŸŒ ç¿»è¯‘é¢˜ç»ƒä¹ </h3>
                            <div class="exercise-container" id="translateContainer"></div>
                            <div class="exercise-controls">
                                <button class="btn btn-primary" id="translateNextBtn" onclick="nextTranslateQuestion()">å¼€å§‹ç¿»è¯‘é¢˜</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- é­”æ³•ç»ƒä¹  -->
                    <div id="magic-exercises" class="exercise-type-section">
                        <div class="grammar-card">
                            <h3>ğŸ”® é­”æ³•ç»ƒä¹ </h3>
                            <div class="exercise-container" id="magicContainer"></div>
                            <div class="exercise-controls">
                                <button class="btn btn-primary" id="magicNextBtn" onclick="nextMagicQuestion()">å¼€å§‹é­”æ³•ç»ƒä¹ </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script src="script.js"></script>
    <script src="grammar.js"></script>
    <script src="exercise-effects.js"></script>
    <script src="grammar-exercises.js"></script>
    
    <script>
        let testResults = [];
        
        function addTestResult(name, status, message) {
            testResults.push({name, status, message, timestamp: new Date()});
            updateTestDisplay();
        }
        
        function updateTestDisplay() {
            const resultsDiv = document.getElementById('testResults');
            const recent = testResults.slice(-8); // æ˜¾ç¤ºæœ€è¿‘8ä¸ªç»“æœ
            
            resultsDiv.innerHTML = recent.map(result => `
                <div class="test-item test-${result.status}">
                    <strong>${result.name}</strong>: ${result.message}
                    <div style="font-size:11px; opacity:0.7;">${result.timestamp.toLocaleTimeString()}</div>
                </div>
            `).join('');
        }
        
        function runAllTests() {
            addTestResult('å¼€å§‹æµ‹è¯•', 'info', 'è¿è¡Œæ‰€æœ‰åŠŸèƒ½æµ‹è¯•');
            
            // æµ‹è¯•1: æŒ‰é’®æ ·å¼
            setTimeout(() => testButtonStyles(), 100);
            
            // æµ‹è¯•2: æ˜Ÿæ˜Ÿæ—‹è½¬
            setTimeout(() => testStarRotation(), 300);
            
            // æµ‹è¯•3: é€‰é¡¹å¡åˆ‡æ¢
            setTimeout(() => testTabSwitching(), 500);
            
            // æµ‹è¯•4: ç»ƒä¹ ç³»ç»Ÿ
            setTimeout(() => testExerciseSystem(), 700);
        }
        
        function testButtonStyles() {
            const loginBtn = document.getElementById('loginBtn');
            const registerBtn = document.getElementById('registerBtn');
            
            if (loginBtn && registerBtn) {
                const loginStyle = window.getComputedStyle(loginBtn);
                const registerStyle = window.getComputedStyle(registerBtn);
                
                const hasCorrectStyle = loginStyle.borderRadius.includes('25px') && 
                                      registerStyle.background.includes('linear-gradient');
                
                addTestResult('æŒ‰é’®æ ·å¼', hasCorrectStyle ? 'pass' : 'fail', 
                    hasCorrectStyle ? 'ç™»å½•æ³¨å†ŒæŒ‰é’®æ ·å¼æ­£ç¡®' : 'æŒ‰é’®æ ·å¼éœ€è¦ä¿®å¤');
            }
        }
        
        function testStarRotation() {
            const starfield = document.getElementById('starfield');
            if (starfield) {
                const stars = starfield.querySelectorAll('.star');
                const hasStars = stars.length > 0;
                const hasAnimation = stars.length > 0 && stars[0].style.animation;
                
                addTestResult('æ˜Ÿæ˜Ÿæ—‹è½¬', hasStars && hasAnimation ? 'pass' : 'fail',
                    `å‘ç°${stars.length}ä¸ªæ˜Ÿæ˜Ÿï¼ŒåŠ¨ç”»${hasAnimation ? 'æ­£å¸¸' : 'å¼‚å¸¸'}`);
                
                // å¼ºåˆ¶é‡æ–°å¯åŠ¨æ˜Ÿæ˜ŸåŠ¨ç”»
                stars.forEach(star => {
                    const anim = star.style.animation;
                    star.style.animation = '';
                    setTimeout(() => star.style.animation = anim, 10);
                });
            }
        }
        
        function testTabSwitching() {
            // æµ‹è¯•é€‰é¡¹å¡åˆ‡æ¢
            const tabs = document.querySelectorAll('.tab-btn');
            if (tabs.length > 0) {
                // ç‚¹å‡»ç¬¬äºŒä¸ªé€‰é¡¹å¡
                if (tabs[1]) {
                    tabs[1].click();
                    setTimeout(() => {
                        const isActive = tabs[1].classList.contains('active');
                        addTestResult('é€‰é¡¹å¡åˆ‡æ¢', isActive ? 'pass' : 'fail',
                            isActive ? 'é€‰é¡¹å¡åˆ‡æ¢æ­£å¸¸' : 'é€‰é¡¹å¡åˆ‡æ¢å¤±è´¥');
                        
                        // åˆ‡æ¢å›ç¬¬ä¸€ä¸ª
                        tabs[0].click();
                    }, 200);
                }
            }
        }
        
        function testExerciseSystem() {
            // æµ‹è¯•ç»ƒä¹ ç³»ç»Ÿæ˜¯å¦åŠ è½½
            const exerciseContainer = document.getElementById('choiceContainer');
            const nextButton = document.getElementById('choiceNextBtn');
            
            if (exerciseContainer && nextButton) {
                addTestResult('ç»ƒä¹ ç³»ç»Ÿ', 'pass', 'ç»ƒä¹ ç³»ç»Ÿç»„ä»¶åŠ è½½æ­£å¸¸');
                
                // åˆ‡æ¢åˆ°ç»ƒä¹ é€‰é¡¹å¡
                const exerciseTab = document.querySelector('[onclick="showGrammarSection(\'exercises\')"]');
                if (exerciseTab) {
                    exerciseTab.click();
                    addTestResult('ç»ƒä¹ åˆ‡æ¢', 'pass', 'æˆåŠŸåˆ‡æ¢åˆ°ç»ƒä¹ é¡µé¢');
                }
            } else {
                addTestResult('ç»ƒä¹ ç³»ç»Ÿ', 'fail', 'ç»ƒä¹ ç³»ç»Ÿç»„ä»¶æœªæ‰¾åˆ°');
            }
        }
        
        function testExerciseFlow() {
            addTestResult('ç»ƒä¹ æµç¨‹', 'info', 'å¼€å§‹æµ‹è¯•å®Œæ•´ç»ƒä¹ æµç¨‹');
            
            // åˆ‡æ¢åˆ°ç»ƒä¹ é¡µé¢
            showGrammarSection('exercises');
            
            setTimeout(() => {
                // å¼€å§‹é€‰æ‹©é¢˜
                showExerciseType('choice');
                addTestResult('é€‰æ‹©é¢˜', 'info', 'å·²è¿›å…¥é€‰æ‹©é¢˜æ¨¡å¼');
                
                setTimeout(() => {
                    // æ¨¡æ‹Ÿå®Œæˆé€‰æ‹©é¢˜åçš„æµç¨‹
                    addTestResult('ç»ƒä¹ æµç¨‹', 'pass', 'ç»ƒä¹ æµç¨‹æµ‹è¯•å®Œæˆ');
                }, 1000);
            }, 500);
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨è¿è¡Œæµ‹è¯•
        window.addEventListener('load', function() {
            setTimeout(() => {
                addTestResult('é¡µé¢åŠ è½½', 'pass', 'æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ');
                runAllTests();
            }, 1000);
        });
        
        console.log('ğŸ§ª è¯­æ³•åŠŸèƒ½æµ‹è¯•é¡µé¢å·²åŠ è½½');
    </script>
</body>
</html>