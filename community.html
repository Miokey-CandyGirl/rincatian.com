<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>光线使者社区 - 琳凯蒂亚语社区</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="community.css">
    <link rel="icon" href="logo.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="stars"></div>
    <div class="floating-particles"></div>

    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <div class="rincatian-flag">
                    <img src="rincatian-flag.png" alt="琳凯蒂亚国旗" class="flag-icon">
                </div>
                <div class="planet-icon"></div>
                <div class="logo-text">
                    <span class="logo-chinese">琳凯蒂亚语社区</span>
                    <span class="logo-english">Rincatian Community</span>
                </div>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html">首页</a></li>
                <li><a href="grammar.html">语法</a></li>
                <li><a href="dictionary.html">词典</a></li>
                <li><a href="culture.html">文化</a></li>
                <li><a href="community.html" class="active">社区</a></li>
            <!--    <li><a href="admin.html" class="admin-link" id="adminNav" style="display: none;">管理</a></li>  -->
            </ul>
            <div class="nav-extras">
                <div class="tian-calendar">
                    <span class="calendar-icon">📅</span>
                    <span class="tian-date" id="tianDate">载入中...</span>
                </div>
                <div class="auth-buttons">
                    <button class="btn btn-outline btn-small" id="loginBtn">登录</button>
                    <button class="btn btn-primary btn-small" id="registerBtn">注册</button>
                </div>
                <div class="user-info" id="userInfo" style="display: none;">
                    <div class="user-avatar" id="userAvatar"></div>
                    <span class="user-name" id="userName"></span>
                    <div class="user-dropdown">
                        <a href="#" id="profileLink">个人中心</a>
                        <a href="#" id="logoutLink">退出登录</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <header class="community-hero">
        <div class="hero-content">
            <h1 class="hero-title">光线使者社区</h1>
            <p class="hero-subtitle">与来自琳凯蒂亚星球的伙伴们一起探索魔法语言的奥秘</p>
            <div class="community-stats">
                <div class="stat-item">
                    <div class="stat-number" id="totalUsers">0</div>
                    <div class="stat-label">光线使者</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="totalPosts">0</div>
                    <div class="stat-label">魔法留言</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="onlineUsers">0</div>
                    <div class="stat-label">在线探索者</div>
                </div>
            </div>
        </div>
    </header>

    <main class="community-main">
        <div class="community-container">
            <!-- 社区导航 -->
            <nav class="community-nav">
                <ul class="nav-tabs">
                    <li><a href="#" class="nav-tab active" data-tab="discussions">讨论广场</a></li>
                    <li><a href="#" class="nav-tab" data-tab="learning">学习交流</a></li>
                    <li><a href="#" class="nav-tab" data-tab="translation">翻译练习</a></li>
                    <li><a href="#" class="nav-tab" data-tab="events">星球活动</a></li>
                    <li><a href="#" class="nav-tab" data-tab="resources">资源分享</a></li>
                    <li><a href="#" class="nav-tab" data-tab="stories">故事研讨</a></li>
                </ul>
            </nav>

            <div class="community-content">
                <!-- 讨论广场 -->
                <section id="discussions" class="community-section active">
                    <div class="section-header">
                        <h2>讨论广场</h2>
                        <button class="btn btn-primary" id="newPostBtn">
                            <span class="icon">✨</span>
                            发布新话题
                        </button>
                    </div>

                    <div class="posts-container">
                        <div class="post-filters">
                            <button class="filter-btn active" data-filter="all">全部</button>
                            <button class="filter-btn" data-filter="hot">热门</button>
                            <button class="filter-btn" data-filter="latest">最新</button>
                            <button class="filter-btn" data-filter="unanswered">待回复</button>
                        </div>

                        <div class="posts-list" id="postsList">
                            <!-- 帖子将通过JavaScript动态加载 -->
                        </div>

                        <div class="load-more">
                            <button class="btn btn-outline" id="loadMoreBtn">加载更多</button>
                        </div>
                    </div>
                </section>

                <!-- 学习交流 -->
                <section id="learning" class="community-section">
                    <div class="section-header">
                        <h2>学习交流</h2>
                        <div class="study-tools">
                            <button class="btn btn-secondary" id="studyGroupBtn">加入学习小组</button>
                            <button class="btn btn-secondary" id="studyProgressBtn">学习进度</button>
                        </div>
                    </div>

                    <div class="learning-content">
                        <div class="study-groups">
                            <h3>活跃学习小组</h3>
                            <div class="groups-grid" id="studyGroups">
                                <!-- 学习小组将通过JavaScript动态加载 -->
                            </div>
                        </div>

                        <div class="study-challenges">
                            <h3>每日挑战</h3>
                            <div class="challenge-card" id="dailyChallenge">
                                <!-- 每日挑战内容 -->
                            </div>
                        </div>

                        <div class="study-leaderboard">
                            <h3>学习排行榜</h3>
                            <div class="leaderboard-list" id="leaderboard">
                                <!-- 排行榜将通过JavaScript动态加载 -->
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 翻译练习 -->
                <section id="translation" class="community-section">
                    <div class="section-header">
                        <h2>翻译练习</h2>
                        <button class="btn btn-primary" id="newTranslationBtn">提交翻译</button>
                    </div>

                    <div class="translation-content">
                        <div class="translation-challenges">
                            <h3>翻译挑战</h3>
                            <div class="challenges-list" id="translationChallenges">
                                <!-- 翻译挑战将通过JavaScript动态加载 -->
                            </div>
                        </div>

                        <div class="translation-showcase">
                            <h3>优秀翻译展示</h3>
                            <div class="showcase-list" id="translationShowcase">
                                <!-- 优秀翻译将通过JavaScript动态加载 -->
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 星球活动 -->
                <section id="events" class="community-section">
                    <div class="section-header">
                        <h2>星球活动</h2>
                        <button class="btn btn-primary" id="createEventBtn">创建活动</button>
                    </div>

                    <div class="events-content">
                        <div class="upcoming-events">
                            <h3>即将开始</h3>
                            <div class="events-grid" id="upcomingEvents">
                                <!-- 即将开始的活动 -->
                            </div>
                        </div>

                        <div class="ongoing-events">
                            <h3>正在进行</h3>
                            <div class="events-grid" id="ongoingEvents">
                                <!-- 正在进行的活动 -->
                            </div>
                        </div>

                        <div class="past-events">
                            <h3>往期回顾</h3>
                            <div class="events-grid" id="pastEvents">
                                <!-- 往期活动 -->
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 资源分享 -->
                <section id="resources" class="community-section">
                    <div class="section-header">
                        <h2>资源分享</h2>
                        <button class="btn btn-primary" id="shareResourceBtn">分享资源</button>
                    </div>

                    <div class="resources-content">
                        <div class="resource-categories">
                            <div class="category-tabs">
                                <button class="category-tab active" data-category="all">全部</button>
                                <button class="category-tab" data-category="grammar">语法资料</button>
                                <button class="category-tab" data-category="vocabulary">词汇表</button>
                                <button class="category-tab" data-category="exercises">练习题</button>
                                <button class="category-tab" data-category="tools">学习工具</button>
                                <button class="category-tab" data-category="media">音视频</button>
                            </div>
                        </div>

                        <div class="resources-grid" id="resourcesList">
                            <!-- 资源列表将通过JavaScript动态加载 -->
                        </div>
                    </div>
                </section>

                <!-- 故事研讨 -->
                <section id="stories" class="community-section">
                    <div class="section-header">
                        <h2>光线传奇故事研讨</h2>
                        <button class="btn btn-primary" id="createStoryDiscussionBtn">
                            <span class="icon">📚</span>
                            发起讨论
                        </button>
                    </div>

                    <div class="story-content">
                        <!-- 讨论分类导航 -->
                        <div class="story-navigation">
                            <h3>🎭 讨论分类</h3>
                            <div class="discussion-categories">
                                <button class="category-btn active" data-category="all" onclick="console.log('直接点击-全部'); switchStoryCategory('all')">
                                    <span class="icon">🌟</span>
                                    <span class="text">全部讨论</span>
                                </button>
                                <button class="category-btn" data-category="character" onclick="console.log('直接点击-角色'); switchStoryCategory('character')">
                                    <span class="icon">👥</span>
                                    <span class="text">角色分析</span>
                                </button>
                                <button class="category-btn" data-category="plot" onclick="console.log('直接点击-剧情'); switchStoryCategory('plot')">
                                    <span class="icon">📚</span>
                                    <span class="text">剧情解读</span>
                                </button>
                                <button class="category-btn" data-category="world" onclick="console.log('直接点击-世界观'); switchStoryCategory('world')">
                                    <span class="icon">🌍</span>
                                    <span class="text">世界观</span>
                                </button>
                                <button class="category-btn" data-category="theory" onclick="console.log('直接点击-理论'); switchStoryCategory('theory')">
                                    <span class="icon">🔮</span>
                                    <span class="text">理论探讨</span>
                                </button>
                                <button class="category-btn" data-category="creative" onclick="console.log('直接点击-创作'); switchStoryCategory('creative')">
                                    <span class="icon">✨</span>
                                    <span class="text">创作分享</span>
                                </button>
                            </div>
                        </div>

                        <!-- 热门讨论话题 -->
                        <div class="hot-topics">
                            <h3>🔥 热门话题</h3>
                            <div class="topics-grid">
                                <div class="topic-card">
                                    <div class="topic-header">
                                        <h4>妙可的双重身份认知与成长</h4>
                                        <span class="topic-type character">角色分析</span>
                                    </div>
                                    <p class="topic-excerpt">田野意识与妙可身体的融合过程体现了什么样的哲学思考？从18岁少年到6岁女童的身份转换，反映了现代社会中青少年的身份认同危机...</p>
                                    <div class="topic-stats">
                                        <span class="replies">💬 42 回复</span>
                                        <span class="likes">❤️ 125</span>
                                        <span class="time">2小时前</span>
                                    </div>
                                </div>

                                <div class="topic-card">
                                    <div class="topic-header">
                                        <h4>琳凯蒂亚星球的魔法科学体系</h4>
                                        <span class="topic-type world">世界观</span>
                                    </div>
                                    <p class="topic-excerpt">银蓝色铃铛树会唱歌、流光云变色掉光球、双月交叠成彩虹...这些奇幻元素背后有怎样的科学原理？让我们从物理学角度分析...</p>
                                    <div class="topic-stats">
                                        <span class="replies">💬 38 回复</span>
                                        <span class="likes">❤️ 89</span>
                                        <span class="time">5小时前</span>
                                    </div>
                                </div>

                                <div class="topic-card">
                                    <div class="topic-header">
                                        <h4>云雨时空的心理分析：从纯真到黑化</h4>
                                        <span class="topic-type character">角色分析</span>
                                    </div>
                                    <p class="topic-excerpt">从童年伙伴到叛逆者，云雨和时空的心理转变过程值得深思。他们的背叛是出于嫉妒、野心，还是更深层的心理创伤？</p>
                                    <div class="topic-stats">
                                        <span class="replies">💬 55 回复</span>
                                        <span class="likes">❤️ 167</span>
                                        <span class="time">1天前</span>
                                    </div>
                                </div>

                                <div class="topic-card">
                                    <div class="topic-header">
                                        <h4>光线传奇中的象征主义解读</h4>
                                        <span class="topic-type theory">理论探讨</span>
                                    </div>
                                    <p class="topic-excerpt">彩虹水晶代表什么？星光河的流淌暗示什么？从文学角度分析故事中的象征元素和隐喻含义...</p>
                                    <div class="topic-stats">
                                        <span class="replies">💬 29 回复</span>
                                        <span class="likes">❤️ 73</span>
                                        <span class="time">3天前</span>
                                    </div>
                                </div>

                                <div class="topic-card">
                                    <div class="topic-header">
                                        <h4>梦云的救赎之路：可能性分析</h4>
                                        <span class="topic-type plot">剧情解读</span>
                                    </div>
                                    <p class="topic-excerpt">被时空控制的梦云还有救赎的希望吗？从心理学和剧情发展角度，探讨她重返光明的可能路径...</p>
                                    <div class="topic-stats">
                                        <span class="replies">💬 67 回复</span>
                                        <span class="likes">❤️ 201</span>
                                        <span class="time">6小时前</span>
                                    </div>
                                </div>

                                <div class="topic-card">
                                    <div class="topic-header">
                                        <h4>同人创作：妙可与丽丽的友谊番外</h4>
                                        <span class="topic-type creative">创作分享</span>
                                    </div>
                                    <p class="topic-excerpt">分享原创同人小说《星光下的约定》，讲述妙可和丽丽在琳凯蒂亚星球的童年友谊故事...</p>
                                    <div class="topic-stats">
                                        <span class="replies">💬 24 回复</span>
                                        <span class="likes">❤️ 95</span>
                                        <span class="time">8小时前</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 角色关系图 -->
                        <div class="character-relationships">
                            <h3>🌟 角色关系网络</h3>
                            <div class="relationship-diagram">
                                <div class="character-node main">
                                    <div class="character-avatar">👑</div>
                                    <span>妙可/田野</span>
                                    <small>太阳光线使者</small>
                                </div>
                                
                                <div class="character-node ally">
                                    <div class="character-avatar">⭐</div>
                                    <span>丽丽</span>
                                    <small>星星光线使者</small>
                                </div>
                                
                                <div class="character-node enemy">
                                    <div class="character-avatar">☁️</div>
                                    <span>云雨/韩斌</span>
                                    <small>叛逆者</small>
                                </div>
                                
                                <div class="character-node enemy">
                                    <div class="character-avatar">⚡</div>
                                    <span>时空/俊伟</span>
                                    <small>叛逆者</small>
                                </div>
                                
                                <div class="character-node uncertain">
                                    <div class="character-avatar">🌧️</div>
                                    <span>梦云</span>
                                    <small>小云雨使者（被控制）</small>
                                </div>
                                
                                <div class="character-node guide">
                                    <div class="character-avatar">🔮</div>
                                    <span>星使爷爷</span>
                                    <small>引导者</small>
                                </div>
                            </div>
                        </div>

                        <!-- 故事时间线 -->
                        <div class="story-timeline">
                            <h3>⏰ 故事时间线</h3>
                            <div class="timeline">
                                <div class="timeline-item">
                                    <div class="timeline-marker">📅</div>
                                    <div class="timeline-content">
                                        <h4>18年前 - 琳凯蒂亚之乱</h4>
                                        <p>云雨时空叛乱，妙可等光线使者被送往地球历练</p>
                                        <span class="timeline-chapter">前传篇</span>
                                    </div>
                                </div>
                                
                                <div class="timeline-item">
                                    <div class="timeline-marker">🌟</div>
                                    <div class="timeline-content">
                                        <h4>2015年8月25日 - 彩虹水晶散落</h4>
                                        <p>田野被袭击变身妙可，七颗彩虹水晶散落合肥</p>
                                        <span class="timeline-chapter">第一集</span>
                                    </div>
                                </div>
                                
                                <div class="timeline-item">
                                    <div class="timeline-marker">📚</div>
                                    <div class="timeline-content">
                                        <h4>8月26日-9月1日 - 身份适应</h4>
                                        <p>妙可努力适应新身体，在开学考试中突破困境</p>
                                        <span class="timeline-chapter">第二-三集</span>
                                    </div>
                                </div>
                                
                                <div class="timeline-item">
                                    <div class="timeline-marker">⭐</div>
                                    <div class="timeline-content">
                                        <h4>9月7日-9日 - 丽丽觉醒</h4>
                                        <p>妙可找到丽丽，在危机中唤醒星星光线使者</p>
                                        <span class="timeline-chapter">第四集</span>
                                    </div>
                                </div>
                                
                                <div class="timeline-item">
                                    <div class="timeline-marker">🌧️</div>
                                    <div class="timeline-content">
                                        <h4>9月10日-10月1日 - 梦云陷阱</h4>
                                        <p>时空设局控制梦云，将其改造成潜伏的棋子</p>
                                        <span class="timeline-chapter">第五-六集</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 讨论列表 -->
                        <div class="story-discussions">
                            <h3>💭 最新讨论</h3>
                            <div class="discussions-list" id="storyDiscussionsList">
                                <!-- 讨论将通过JavaScript动态加载 -->
                            </div>
                            
                            <div class="load-more">
                                <button class="btn btn-outline" id="loadMoreDiscussionsBtn">加载更多讨论</button>
                            </div>
                        </div>

                        <!-- 创作灵感 -->
                        <div class="creative-inspiration">
                            <h3>✨ 创作灵感与互动</h3>
                            <div class="inspiration-categories">
                                <div class="inspiration-section">
                                    <h4>🎨 角色探索</h4>
                                    <div class="inspiration-cards">
                                        <div class="inspiration-card character">
                                            <h5>👑 如果你是妙可</h5>
                                            <p>面对身体突然变化，你会如何应对？分享你的想法和解决方案</p>
                                            <button class="btn btn-secondary btn-small" onclick="handleInspirationClick('🎨 角色扮演')">参与讨论</button>
                                        </div>
                                        <div class="inspiration-card character">
                                            <h5>⭐ 丽丽的成长轨迹</h5>
                                            <p>分析丽丽从普通女孩到星星光线使者的成长历程</p>
                                            <button class="btn btn-secondary btn-small" onclick="handleCharacterAnalysis('丽丽')">深度分析</button>
                                        </div>
                                        <div class="inspiration-card character">
                                            <h5>🌧️ 梦云的内心世界</h5>
                                            <p>探索梦云在被控制前后的心理状态变化</p>
                                            <button class="btn btn-secondary btn-small" onclick="handleCharacterAnalysis('梦云')">心理分析</button>
                                        </div>
                                    </div>
                                </div>

                                <div class="inspiration-section">
                                    <h4>🌍 世界构建</h4>
                                    <div class="inspiration-cards">
                                        <div class="inspiration-card world">
                                            <h5>🌌 新地区设计</h5>
                                            <p>设计一个琳凯蒂亚星球上的新地区，包括地貌、生物和文化</p>
                                            <button class="btn btn-secondary btn-small" onclick="handleWorldBuilding('地区')">开始创造</button>
                                        </div>
                                        <div class="inspiration-card world">
                                            <h5>🦄 神奇生物</h5>
                                            <p>创造一种琳凯蒂亚星球特有的神奇生物，详细描述其能力和习性</p>
                                            <button class="btn btn-secondary btn-small" onclick="handleWorldBuilding('生物')">设计生物</button>
                                        </div>
                                        <div class="inspiration-card world">
                                            <h5>✨ 魔法系统</h5>
                                            <p>完善光线魔法的理论体系，探讨不同魔法之间的关系</p>
                                            <button class="btn btn-secondary btn-small" onclick="handleWorldBuilding('魔法')">理论探讨</button>
                                        </div>
                                    </div>
                                </div>

                                <div class="inspiration-section">
                                    <h4>📝 情节创作</h4>
                                    <div class="inspiration-cards">
                                        <div class="inspiration-card plot">
                                            <h5>🔮 剧情预测</h5>
                                            <p>梦云被控制后会发生什么？分享你的预测和分析</p>
                                            <button class="btn btn-secondary btn-small" onclick="handleInspirationClick('🔮 情节预测')">写预测</button>
                                        </div>
                                        <div class="inspiration-card plot">
                                            <h5>🕰️ 平行时空</h5>
                                            <p>如果云雨和时空没有背叛，故事会如何发展？</p>
                                            <button class="btn btn-secondary btn-small" onclick="handlePlotCreation('平行')">创作番外</button>
                                        </div>
                                        <div class="inspiration-card plot">
                                            <h5>🎉 后续剧情</h5>
                                            <p>第六集之后的故事会怎样发展？创作你的续集</p>
                                            <button class="btn btn-secondary btn-small" onclick="handlePlotCreation('后续')">续写故事</button>
                                        </div>
                                    </div>
                                </div>

                                <div class="inspiration-section">
                                    <h4>🎨 艺术创作</h4>
                                    <div class="inspiration-cards">
                                        <div class="inspiration-card creative">
                                            <h5>🎵 音乐创作</h5>
                                            <p>为光线传奇创作主题音乐，或用琳凯蒂亚语写歌词</p>
                                            <button class="btn btn-secondary btn-small" onclick="handleArtCreation('音乐')">创作音乐</button>
                                        </div>
                                        <div class="inspiration-card creative">
                                            <h5>🎨 绘画分享</h5>
                                            <p>绘制角色形象、场景设定或故事情节的插图</p>
                                            <button class="btn btn-secondary btn-small" onclick="handleArtCreation('绘画')">上传作品</button>
                                        </div>
                                        <div class="inspiration-card creative">
                                            <h5>🎦 视频创作</h5>
                                            <p>制作角色分析视频、故事解读或翻译教学</p>
                                            <button class="btn btn-secondary btn-small" onclick="handleArtCreation('视频')">分享视频</button>
                                        </div>
                                    </div>
                                </div>

                                <div class="inspiration-section">
                                    <h4>🧠 理论研究</h4>
                                    <div class="inspiration-cards">
                                        <div class="inspiration-card theory">
                                            <h5>📚 文学分析</h5>
                                            <p>从文学角度分析故事的象征意义、主题思想等</p>
                                            <button class="btn btn-secondary btn-small" onclick="handleTheoryDiscussion('文学')">学术讨论</button>
                                        </div>
                                        <div class="inspiration-card theory">
                                            <h5>🧠 心理学研究</h5>
                                            <p>从心理学角度分析角色行为和情感变化</p>
                                            <button class="btn btn-secondary btn-small" onclick="handleTheoryDiscussion('心理学')">心理分析</button>
                                        </div>
                                        <div class="inspiration-card theory">
                                            <h5>🔬 科学探索</h5>
                                            <p>从科学角度探讨魔法系统的可能性和原理</p>
                                            <button class="btn btn-secondary btn-small" onclick="handleTheoryDiscussion('科学')">科学分析</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- 侧边栏 -->
            <aside class="community-sidebar">
                <div class="sidebar-widget online-users">
                    <h3>在线光线使者</h3>
                    <div class="online-list" id="onlineUsersList">
                        <!-- 在线用户列表 -->
                    </div>
                </div>

                <div class="sidebar-widget recent-activity">
                    <h3>最新动态</h3>
                    <div class="activity-list" id="recentActivity">
                        <!-- 最新动态 -->
                    </div>
                </div>

                <div class="sidebar-widget community-rules">
                    <h3>社区守则</h3>
                    <div class="rules-content">
                        <ul>
                            <li>🌟 尊重每一位光线使者</li>
                            <li>✨ 友善交流，共同进步</li>
                            <li>🔮 分享知识，传播光明</li>
                            <li>🌙 保护社区和谐氛围</li>
                            <li>💎 禁止恶意灌水和广告</li>
                        </ul>
                    </div>
                </div>
            </aside>
        </div>
    </main>

    <!-- 模态框 -->
    <!-- 登录模态框 -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>光线使者登录</h3>
                <button class="close-btn" data-modal="loginModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="loginForm">
                    <div class="form-group">
                        <label for="loginEmail">邮箱/用户名</label>
                        <input type="text" id="loginEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">密码</label>
                        <input type="password" id="loginPassword" required>
                    </div>
                    <div class="form-options">
                        <label class="checkbox">
                            <input type="checkbox" id="rememberMe">
                            <span>记住我</span>
                        </label>
                        <a href="#" class="forgot-password">忘记密码？</a>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">进入星球</button>
                </form>
                <div class="modal-footer">
                    <p>还没有账号？<a href="#" id="switchToRegister">立即注册</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- 注册模态框 -->
    <div class="modal" id="registerModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>成为光线使者</h3>
                <button class="close-btn" data-modal="registerModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="registerForm">
                    <div class="form-group">
                        <label for="registerUsername">用户名</label>
                        <input type="text" id="registerUsername" required>
                        <span class="form-hint">3-20个字符，支持中英文</span>
                    </div>
                    <div class="form-group">
                        <label for="registerEmail">邮箱</label>
                        <input type="email" id="registerEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="registerPassword">密码</label>
                        <input type="password" id="registerPassword" required>
                        <span class="form-hint">至少6个字符</span>
                    </div>
                    <div class="form-group">
                        <label for="confirmPassword">确认密码</label>
                        <input type="password" id="confirmPassword" required>
                    </div>
                    <div class="form-group">
                        <label for="userType">选择您的身份</label>
                        <select id="userType">
                            <option value="learner">语言学习者</option>
                            <option value="teacher">语言导师</option>
                            <option value="translator">翻译探索者</option>
                            <option value="researcher">语言研究者</option>
                        </select>
                    </div>
                    <div class="form-options">
                        <label class="checkbox">
                            <input type="checkbox" id="agreeTerms" required>
                            <span>我同意<a href="#">服务条款</a>和<a href="#">隐私政策</a></span>
                        </label>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">加入星球</button>
                </form>
                <div class="modal-footer">
                    <p>已有账号？<a href="#" id="switchToLogin">立即登录</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- 发布话题模态框 -->
    <div class="modal" id="newPostModal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3>发布新话题</h3>
                <button class="close-btn" data-modal="newPostModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="newPostForm">
                    <div class="form-group">
                        <label for="postTitle">标题</label>
                        <input type="text" id="postTitle" placeholder="请输入话题标题..." required>
                    </div>
                    <div class="form-group">
                        <label for="postCategory">分类</label>
                        <select id="postCategory">
                            <option value="general">一般讨论</option>
                            <option value="grammar">语法问题</option>
                            <option value="vocabulary">词汇学习</option>
                            <option value="culture">文化交流</option>
                            <option value="translation">翻译讨论</option>
                            <option value="resources">资源分享</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="postContent">内容</label>
                        <textarea id="postContent" rows="8" placeholder="分享您的想法..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="postTags">标签</label>
                        <input type="text" id="postTags" placeholder="请输入标签，用逗号分隔">
                        <span class="form-hint">例如：语法,初学者,疑问</span>
                    </div>
                    <button type="submit" class="btn btn-primary">发布话题</button>
                </form>
            </div>
        </div>
    </div>

    <!-- 故事讨论模态框 -->
    <div class="modal" id="storyDiscussionModal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3>发起故事讨论</h3>
                <button class="close-btn" data-modal="storyDiscussionModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="storyDiscussionForm">
                    <div class="form-group">
                        <label for="storyTitle">讨论标题</label>
                        <input type="text" id="storyTitle" placeholder="请输入讨论标题..." required>
                    </div>
                    <div class="form-group">
                        <label for="storyChapter">相关章节</label>
                        <select id="storyChapter">
                            <option value="general">综合讨论</option>
                            <option value="prequel">前传篇</option>
                            <option value="chapter1">第一集</option>
                            <option value="chapter2">第二集</option>
                            <option value="chapter3">第三集</option>
                            <option value="chapter4">第四集</option>
                            <option value="chapter5">第五集</option>
                            <option value="chapter6">第六集</option>
                            <option value="characters">角色分析</option>
                            <option value="worldbuilding">世界观</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="discussionType">讨论类型</label>
                        <select id="discussionType">
                            <option value="analysis">剧情分析</option>
                            <option value="character">角色探讨</option>
                            <option value="prediction">剧情预测</option>
                            <option value="worldview">世界观讨论</option>
                            <option value="creative">二次创作</option>
                            <option value="question">疑问解答</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="storyContent">讨论内容</label>
                        <textarea id="storyContent" rows="10" placeholder="分享您对《光线传奇》的见解和想法..."></textarea>
                        <span class="form-hint">可以包含具体的情节引用、角色分析、剧情预测等</span>
                    </div>
                    <div class="form-group">
                        <label for="storyTags">讨论标签</label>
                        <input type="text" id="storyTags" placeholder="请输入标签，用逗号分隔">
                        <span class="form-hint">例如：妙可,身份认知,双重身份</span>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="containsSpoilers">
                            <span>包含剧透内容</span>
                        </label>
                        <span class="form-hint">勾选此项将会在标题上添加剧透警告</span>
                    </div>
                    <button type="submit" class="btn btn-primary">发起讨论</button>
                </form>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>琳凯蒂亚语社区</h3>
                <p>探索奇幻语言的魅力</p>
                <p>基于《光线传奇》小说世界</p>
            </div>
            <div class="footer-section">
                <h4>快速链接</h4>
                <ul>
                    <li><a href="index.html">首页</a></li>
                    <li><a href="grammar.html">语法</a></li>
                    <li><a href="dictionary.html">词典</a></li>
                    <li><a href="culture.html">文化</a></li>
                    <li><a href="community.html">社区</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>联系我们</h4>
                <p>📧 邮箱：1778181360@qq.com</p>
                <p>👥 QQ群：515385616</p>
                <div class="institution">
                    <h5>华田中央大学田语学院</h5>
                    <p>专业的琳凯蒂亚语研究与教学机构</p>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 琳凯蒂亚语社区. 版权所有.</p>
            <p>华田中央大学田语学院 版权所有</p>
        </div>
    </footer>

    <!-- Supabase系统脚本 -->
    <!-- Supabase CDN支持 -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- Supabase配置 -->
    <script src="config/supabase.js"></script>
    <!-- GitHub Pages兼容的认证和内容管理系统 -->
    <script src="github-pages-auth-system.js"></script>
    <script src="github-pages-content-manager-optimized.js"></script>
    <!-- 社区系统 -->
    <script src="community-system.js"></script>
    <script src="content-manager.js"></script>
    <script src="ai-translation.js"></script>
    <script src="script.js"></script>
    <script src="community.js"></script>
    <script src="flag-navigation.js"></script>
</body>
</html>