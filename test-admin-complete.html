<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®¡ç†é¡µé¢åŠŸèƒ½å®Œæ•´æµ‹è¯• - ç³å‡¯è’‚äºšè¯­ç¤¾åŒº</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #1a237e; color: white; }
        .test-section { background: rgba(255,255,255,0.1); padding: 20px; margin: 20px 0; border-radius: 10px; border: 1px solid rgba(255,215,0,0.3); }
        .test-button { background: #4CAF50; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px; }
        .test-button:hover { background: #45a049; }
        .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background: rgba(76,175,80,0.2); color: #4caf50; }
        .error { background: rgba(244,67,54,0.2); color: #f44336; }
        .warning { background: rgba(255,152,0,0.2); color: #ff9800; }
        .info { background: rgba(33,150,243,0.2); color: #2196f3; }
        .test-log { background: #000; color: #00ff00; padding: 15px; border-radius: 5px; font-family: monospace; max-height: 400px; overflow-y: auto; }
        .feature-demo { background: rgba(255,255,255,0.05); padding: 15px; margin: 15px 0; border-radius: 8px; }
        .admin-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 1rem 0; }
        .stat-card { background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px; text-align: center; }
        .stat-number { font-size: 2rem; font-weight: bold; color: #4ecdc4; }
        .stat-label { font-size: 0.9rem; opacity: 0.8; }
        .user-table { width: 100%; border-collapse: collapse; margin: 1rem 0; }
        .user-table th, .user-table td { padding: 8px; border: 1px solid rgba(255,255,255,0.2); text-align: left; }
        .user-table th { background: rgba(255,255,255,0.1); }
        .role-admin { color: #ff6b6b; font-weight: bold; }
        .role-moderator { color: #4ecdc4; font-weight: bold; }
        .role-user { color: #95e1d3; }
        .status-active { color: #4caf50; }
        .status-inactive { color: #ff9800; }
        .btn-view, .btn-edit, .btn-delete { padding: 4px 8px; margin: 2px; border: none; border-radius: 4px; cursor: pointer; font-size: 0.8rem; }
        .btn-view { background: #2196f3; color: white; }
        .btn-edit { background: #ff9800; color: white; }
        .btn-delete { background: #f44336; color: white; }
    </style>
</head>
<body>
    <h1>ğŸ› ï¸ ç®¡ç†é¡µé¢åŠŸèƒ½å®Œæ•´æµ‹è¯•</h1>
    
    <div class="test-section">
        <h2>ğŸ” ç®¡ç†å‘˜æƒé™éªŒè¯</h2>
        <button class="test-button" onclick="testAdminAccess()">æµ‹è¯•ç®¡ç†å‘˜æƒé™</button>
        <button class="test-button" onclick="loginAsAdmin()">æ¨¡æ‹Ÿç®¡ç†å‘˜ç™»å½•</button>
        <div id="authStatus" class="status info">ç­‰å¾…æƒé™éªŒè¯...</div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ“Š æ•°æ®ç»Ÿè®¡æµ‹è¯•</h2>
        <button class="test-button" onclick="testDataLoading()">æµ‹è¯•æ•°æ®åŠ è½½</button>
        <button class="test-button" onclick="testUserDataGeneration()">ç”Ÿæˆç”¨æˆ·æ•°æ®</button>
        <button class="test-button" onclick="testStatisticsUpdate()">æ›´æ–°ç»Ÿè®¡æ•°æ®</button>
        <div id="dataStatus" class="status info">ç­‰å¾…æ•°æ®æµ‹è¯•...</div>
        
        <div class="feature-demo">
            <h4>ğŸ“ˆ å®æ—¶ç»Ÿè®¡é¢æ¿</h4>
            <div class="admin-stats">
                <div class="stat-card">
                    <div class="stat-number" id="testTotalUsers">0</div>
                    <div class="stat-label">æ€»ç”¨æˆ·æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="testOnlineUsers">0</div>
                    <div class="stat-label">åœ¨çº¿ç”¨æˆ·</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="testTotalVisits">0</div>
                    <div class="stat-label">æ€»è®¿é—®é‡</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="testTodayVisits">0</div>
                    <div class="stat-label">ä»Šæ—¥è®¿é—®</div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ‘¥ ç”¨æˆ·ç®¡ç†æµ‹è¯•</h2>
        <button class="test-button" onclick="testUserManagement()">æµ‹è¯•ç”¨æˆ·ç®¡ç†</button>
        <button class="test-button" onclick="testUserTableRender()">æ¸²æŸ“ç”¨æˆ·è¡¨æ ¼</button>
        <button class="test-button" onclick="testAddUser()">æµ‹è¯•æ·»åŠ ç”¨æˆ·</button>
        <div id="userStatus" class="status info">ç­‰å¾…ç”¨æˆ·ç®¡ç†æµ‹è¯•...</div>
        
        <div class="feature-demo">
            <h4>ğŸ‘¥ ç”¨æˆ·åˆ—è¡¨é¢„è§ˆ</h4>
            <table class="user-table" id="testUserTable">
                <thead>
                    <tr>
                        <th>ç”¨æˆ·</th>
                        <th>é‚®ç®±</th>
                        <th>è§’è‰²</th>
                        <th>çŠ¶æ€</th>
                        <th>æ³¨å†Œæ—¶é—´</th>
                        <th>æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody id="testUserTableBody">
                    <tr><td colspan="6" style="text-align: center; color: #999;">æš‚æ— æ•°æ®</td></tr>
                </tbody>
            </table>
        </div>
    </div>
    
    <div class="test-section">
        <h2>ğŸŒ IPç»Ÿè®¡ä¸è®¿é—®åˆ†æ</h2>
        <button class="test-button" onclick="testIPTracking()">æµ‹è¯•IPè¿½è¸ª</button>
        <button class="test-button" onclick="testVisitAnalytics()">æµ‹è¯•è®¿é—®åˆ†æ</button>
        <button class="test-button" onclick="testGeolocation()">æµ‹è¯•åœ°ç†ä½ç½®</button>
        <div id="ipStatus" class="status info">ç­‰å¾…IPåˆ†ææµ‹è¯•...</div>
        
        <div class="feature-demo">
            <h4>ğŸŒ è®¿é—®åˆ†ææ¦‚è§ˆ</h4>
            <div id="ipAnalytics">
                <p>ğŸ” æ­£åœ¨åˆ†æè®¿é—®æ•°æ®...</p>
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h2>âš™ï¸ ç³»ç»ŸåŠŸèƒ½æµ‹è¯•</h2>
        <button class="test-button" onclick="testEventBinding()">æµ‹è¯•äº‹ä»¶ç»‘å®š</button>
        <button class="test-button" onclick="testTabSwitching()">æµ‹è¯•æ ‡ç­¾åˆ‡æ¢</button>
        <button class="test-button" onclick="testRealTimeUpdates()">æµ‹è¯•å®æ—¶æ›´æ–°</button>
        <div id="systemStatus" class="status info">ç­‰å¾…ç³»ç»ŸåŠŸèƒ½æµ‹è¯•...</div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ“Š ç»¼åˆæµ‹è¯•æ—¥å¿—</h2>
        <div class="test-log" id="testLog">[ç³»ç»Ÿ] ç®¡ç†é¡µé¢åŠŸèƒ½æµ‹è¯•é¡µé¢å·²åŠ è½½...<br></div>
        <button class="test-button" onclick="clearTestLog()">æ¸…ç©ºæ—¥å¿—</button>
        <button class="test-button" onclick="runAllTests()">è¿è¡Œå…¨éƒ¨æµ‹è¯•</button>
        <button class="test-button" onclick="openAdminPage()">æ‰“å¼€ç®¡ç†é¡µé¢</button>
    </div>

    <!-- å¼•å…¥å¿…è¦çš„è„šæœ¬ -->
    <script src="auth-system.js"></script>
    <script src="content-manager.js"></script>
    <script src="admin.js"></script>
    
    <script>
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const colors = { 'success': '#00ff00', 'error': '#ff0000', 'warning': '#ffaa00', 'info': '#00ffff' };
            const color = colors[type] || '#ffffff';
            const logElement = document.getElementById('testLog');
            logElement.innerHTML += `<span style="color: ${color}">[${timestamp}] ${message}</span><br>`;
            logElement.scrollTop = logElement.scrollHeight;
        }
        
        function testAdminAccess() {
            log('æµ‹è¯•ç®¡ç†å‘˜æƒé™éªŒè¯...', 'info');
            
            try {
                if (typeof AdminPanel !== 'undefined') {
                    log('âœ… AdminPanel ç±»å·²åŠ è½½', 'success');
                    
                    // æµ‹è¯•æƒé™æ£€æŸ¥æ–¹æ³•
                    const testPanel = new AdminPanel();
                    if (typeof testPanel.checkAdminAccess === 'function') {
                        log('âœ… checkAdminAccess æ–¹æ³•å­˜åœ¨', 'success');
                        document.getElementById('authStatus').innerHTML = 'âœ… ç®¡ç†å‘˜æƒé™ç³»ç»Ÿæ­£å¸¸';
                        document.getElementById('authStatus').className = 'status success';
                    } else {
                        log('âŒ checkAdminAccess æ–¹æ³•ä¸å­˜åœ¨', 'error');
                        document.getElementById('authStatus').innerHTML = 'âŒ æƒé™æ£€æŸ¥æ–¹æ³•ç¼ºå¤±';
                        document.getElementById('authStatus').className = 'status error';
                    }
                } else {
                    log('âŒ AdminPanel ç±»æœªåŠ è½½', 'error');
                    document.getElementById('authStatus').innerHTML = 'âŒ AdminPanel ç±»æœªåŠ è½½';
                    document.getElementById('authStatus').className = 'status error';
                }
            } catch (error) {
                log(`âŒ æƒé™æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
                document.getElementById('authStatus').innerHTML = 'âŒ æƒé™æµ‹è¯•å¼‚å¸¸';
                document.getElementById('authStatus').className = 'status error';
            }
        }
        
        function loginAsAdmin() {
            log('æ¨¡æ‹Ÿç®¡ç†å‘˜ç™»å½•...', 'info');
            
            // åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·æ•°æ®
            const adminUser = {
                id: 'admin-test',
                username: 'admin',
                email: 'admin@rincatian.com',
                role: 'admin',
                status: 'active',
                joinDate: Date.now(),
                lastLogin: Date.now(),
                avatar: 'ğŸ‘‘'
            };
            
            // ä¿å­˜åˆ° localStorage
            localStorage.setItem('currentUser', JSON.stringify(adminUser));
            
            log('âœ… æ¨¡æ‹Ÿç®¡ç†å‘˜ç™»å½•æˆåŠŸ', 'success');
            document.getElementById('authStatus').innerHTML = 'âœ… ç®¡ç†å‘˜å·²ç™»å½• (æ¨¡æ‹Ÿ)';
            document.getElementById('authStatus').className = 'status success';
        }
        
        function testDataLoading() {
            log('æµ‹è¯•æ•°æ®åŠ è½½åŠŸèƒ½...', 'info');
            
            try {
                if (window.adminPanel && typeof window.adminPanel.loadAdminData === 'function') {
                    window.adminPanel.loadAdminData();
                    log('âœ… ç®¡ç†æ•°æ®åŠ è½½æˆåŠŸ', 'success');
                    document.getElementById('dataStatus').innerHTML = 'âœ… æ•°æ®åŠ è½½ç³»ç»Ÿæ­£å¸¸';
                    document.getElementById('dataStatus').className = 'status success';
                } else {
                    log('âŒ adminPanel æˆ– loadAdminData æ–¹æ³•ä¸å­˜åœ¨', 'error');
                    document.getElementById('dataStatus').innerHTML = 'âŒ æ•°æ®åŠ è½½ç³»ç»Ÿå¼‚å¸¸';
                    document.getElementById('dataStatus').className = 'status error';
                }
            } catch (error) {
                log(`âŒ æ•°æ®åŠ è½½æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
                document.getElementById('dataStatus').innerHTML = 'âŒ æ•°æ®åŠ è½½æµ‹è¯•å¤±è´¥';
                document.getElementById('dataStatus').className = 'status error';
            }
        }
        
        function testUserDataGeneration() {
            log('æµ‹è¯•ç”¨æˆ·æ•°æ®ç”Ÿæˆ...', 'info');
            
            try {
                if (window.adminPanel && typeof window.adminPanel.createSampleUsers === 'function') {
                    const users = window.adminPanel.createSampleUsers();
                    log(`âœ… ç”Ÿæˆäº† ${users.length} ä¸ªç¤ºä¾‹ç”¨æˆ·`, 'success');
                    
                    // æ›´æ–°ç»Ÿè®¡æ˜¾ç¤º
                    document.getElementById('testTotalUsers').textContent = users.length;
                    document.getElementById('testOnlineUsers').textContent = Math.floor(Math.random() * 20) + 5;
                    
                    document.getElementById('dataStatus').innerHTML = `âœ… ç”¨æˆ·æ•°æ®ç”ŸæˆæˆåŠŸ (${users.length} ä¸ªç”¨æˆ·)`;
                    document.getElementById('dataStatus').className = 'status success';
                } else {
                    log('âŒ createSampleUsers æ–¹æ³•ä¸å­˜åœ¨', 'error');
                    document.getElementById('dataStatus').innerHTML = 'âŒ ç”¨æˆ·æ•°æ®ç”Ÿæˆå¤±è´¥';
                    document.getElementById('dataStatus').className = 'status error';
                }
            } catch (error) {
                log(`âŒ ç”¨æˆ·æ•°æ®ç”Ÿæˆå¤±è´¥: ${error.message}`, 'error');
            }
        }
        
        function testStatisticsUpdate() {
            log('æµ‹è¯•ç»Ÿè®¡æ•°æ®æ›´æ–°...', 'info');
            
            // æ¨¡æ‹Ÿè®¿é—®æ•°æ®
            const visitData = {
                total: Math.floor(Math.random() * 50000) + 10000,
                today: Math.floor(Math.random() * 500) + 100
            };
            
            document.getElementById('testTotalVisits').textContent = visitData.total;
            document.getElementById('testTodayVisits').textContent = visitData.today;
            
            log(`âœ… ç»Ÿè®¡æ•°æ®æ›´æ–°å®Œæˆ: æ€»è®¿é—® ${visitData.total}, ä»Šæ—¥ ${visitData.today}`, 'success');
        }
        
        function testUserManagement() {
            log('æµ‹è¯•ç”¨æˆ·ç®¡ç†åŠŸèƒ½...', 'info');
            
            try {
                if (window.adminPanel && typeof window.adminPanel.loadUserData === 'function') {
                    window.adminPanel.loadUserData();
                    log('âœ… ç”¨æˆ·ç®¡ç†åŠŸèƒ½æ­£å¸¸', 'success');
                    document.getElementById('userStatus').innerHTML = 'âœ… ç”¨æˆ·ç®¡ç†ç³»ç»Ÿæ­£å¸¸';
                    document.getElementById('userStatus').className = 'status success';
                } else {
                    log('âŒ loadUserData æ–¹æ³•ä¸å­˜åœ¨', 'error');
                    document.getElementById('userStatus').innerHTML = 'âŒ ç”¨æˆ·ç®¡ç†ç³»ç»Ÿå¼‚å¸¸';
                    document.getElementById('userStatus').className = 'status error';
                }
            } catch (error) {
                log(`âŒ ç”¨æˆ·ç®¡ç†æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
            }
        }
        
        function testUserTableRender() {
            log('æµ‹è¯•ç”¨æˆ·è¡¨æ ¼æ¸²æŸ“...', 'info');
            
            // ç”Ÿæˆæµ‹è¯•ç”¨æˆ·æ•°æ®
            const testUsers = [
                {
                    id: 'admin-001',
                    username: 'admin',
                    email: 'admin@rincatian.com',
                    role: 'admin',
                    status: 'active',
                    joinDate: Date.now() - 86400000 * 30
                },
                {
                    id: 'user-001',
                    username: 'starlight_mage',
                    email: 'starlight@rincatian.com',
                    role: 'moderator',
                    status: 'active',
                    joinDate: Date.now() - 86400000 * 15
                },
                {
                    id: 'user-002',
                    username: 'moon_scholar',
                    email: 'moonscholar@rincatian.com',
                    role: 'user',
                    status: 'active',
                    joinDate: Date.now() - 86400000 * 7
                }
            ];
            
            const tbody = document.getElementById('testUserTableBody');
            tbody.innerHTML = '';
            
            testUsers.forEach(user => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <span>ğŸ‘¤</span>
                            <div>
                                <div style="font-weight: 500;">${user.username}</div>
                                <div style="font-size: 0.8rem; opacity: 0.7;">${user.id}</div>
                            </div>
                        </div>
                    </td>
                    <td>${user.email}</td>
                    <td><span class="role-${user.role}">${user.role}</span></td>
                    <td><span class="status-${user.status}">${user.status}</span></td>
                    <td>${new Date(user.joinDate).toLocaleDateString()}</td>
                    <td>
                        <button class="btn-view">è¯¦æƒ…</button>
                        <button class="btn-edit">ç¼–è¾‘</button>
                        ${user.role !== 'admin' ? '<button class="btn-delete">åˆ é™¤</button>' : ''}
                    </td>
                `;
                tbody.appendChild(row);
            });
            
            log(`âœ… ç”¨æˆ·è¡¨æ ¼æ¸²æŸ“å®Œæˆ: ${testUsers.length} ä¸ªç”¨æˆ·`, 'success');
            document.getElementById('userStatus').innerHTML = 'âœ… ç”¨æˆ·è¡¨æ ¼æ¸²æŸ“æˆåŠŸ';
            document.getElementById('userStatus').className = 'status success';
        }
        
        function testAddUser() {
            log('æµ‹è¯•æ·»åŠ ç”¨æˆ·åŠŸèƒ½...', 'info');
            
            if (window.adminPanel && typeof window.adminPanel.showAddUserModal === 'function') {
                log('âœ… showAddUserModal æ–¹æ³•å­˜åœ¨', 'success');
                document.getElementById('userStatus').innerHTML = 'âœ… æ·»åŠ ç”¨æˆ·åŠŸèƒ½å¯ç”¨';
                document.getElementById('userStatus').className = 'status success';
            } else {
                log('âŒ showAddUserModal æ–¹æ³•ä¸å­˜åœ¨', 'error');
                document.getElementById('userStatus').innerHTML = 'âŒ æ·»åŠ ç”¨æˆ·åŠŸèƒ½ä¸å¯ç”¨';
                document.getElementById('userStatus').className = 'status error';
            }
        }
        
        function testIPTracking() {
            log('æµ‹è¯•IPè¿½è¸ªåŠŸèƒ½...', 'info');
            
            try {
                if (window.adminPanel && typeof window.adminPanel.generateRandomIP === 'function') {
                    const randomIP = window.adminPanel.generateRandomIP();
                    log(`âœ… ç”ŸæˆéšæœºIP: ${randomIP}`, 'success');
                    
                    const analytics = document.getElementById('ipAnalytics');
                    analytics.innerHTML = `
                        <p>ğŸŒ <strong>IPè¿½è¸ªç¤ºä¾‹:</strong></p>
                        <p>ğŸ“ éšæœºIP: ${randomIP}</p>
                        <p>ğŸ  åœ°ç†ä½ç½®: ${window.adminPanel.getRandomLocation()}</p>
                        <p>ğŸŒ æµè§ˆå™¨: ${window.adminPanel.getRandomBrowser()}</p>
                        <p>ğŸ“± è®¾å¤‡: ${window.adminPanel.getRandomDevice()}</p>
                    `;
                    
                    document.getElementById('ipStatus').innerHTML = 'âœ… IPè¿½è¸ªåŠŸèƒ½æ­£å¸¸';
                    document.getElementById('ipStatus').className = 'status success';
                } else {
                    log('âŒ IPè¿½è¸ªæ–¹æ³•ä¸å­˜åœ¨', 'error');
                    document.getElementById('ipStatus').innerHTML = 'âŒ IPè¿½è¸ªåŠŸèƒ½å¼‚å¸¸';
                    document.getElementById('ipStatus').className = 'status error';
                }
            } catch (error) {
                log(`âŒ IPè¿½è¸ªæµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
            }
        }
        
        function testVisitAnalytics() {
            log('æµ‹è¯•è®¿é—®åˆ†æåŠŸèƒ½...', 'info');
            
            if (window.adminPanel && typeof window.adminPanel.loadVisitData === 'function') {
                window.adminPanel.loadVisitData();
                log('âœ… è®¿é—®æ•°æ®åŠ è½½æˆåŠŸ', 'success');
                document.getElementById('ipStatus').innerHTML = 'âœ… è®¿é—®åˆ†æåŠŸèƒ½æ­£å¸¸';
                document.getElementById('ipStatus').className = 'status success';
            } else {
                log('âŒ loadVisitData æ–¹æ³•ä¸å­˜åœ¨', 'error');
            }
        }
        
        function testGeolocation() {
            log('æµ‹è¯•åœ°ç†ä½ç½®åŠŸèƒ½...', 'info');
            
            const locations = ['åŒ—äº¬', 'ä¸Šæµ·', 'å¹¿å·', 'æ·±åœ³', 'æˆéƒ½', 'æ­å·'];
            const randomLocation = locations[Math.floor(Math.random() * locations.length)];
            
            log(`âœ… åœ°ç†ä½ç½®æµ‹è¯•: ${randomLocation}`, 'success');
        }
        
        function testEventBinding() {
            log('æµ‹è¯•äº‹ä»¶ç»‘å®šåŠŸèƒ½...', 'info');
            
            if (window.adminPanel && typeof window.adminPanel.bindEvents === 'function') {
                log('âœ… bindEvents æ–¹æ³•å­˜åœ¨', 'success');
                document.getElementById('systemStatus').innerHTML = 'âœ… äº‹ä»¶ç»‘å®šç³»ç»Ÿæ­£å¸¸';
                document.getElementById('systemStatus').className = 'status success';
            } else {
                log('âŒ bindEvents æ–¹æ³•ä¸å­˜åœ¨', 'error');
                document.getElementById('systemStatus').innerHTML = 'âŒ äº‹ä»¶ç»‘å®šç³»ç»Ÿå¼‚å¸¸';
                document.getElementById('systemStatus').className = 'status error';
            }
        }
        
        function testTabSwitching() {
            log('æµ‹è¯•æ ‡ç­¾åˆ‡æ¢åŠŸèƒ½...', 'info');
            
            if (window.adminPanel && typeof window.adminPanel.switchTab === 'function') {
                log('âœ… switchTab æ–¹æ³•å­˜åœ¨', 'success');
                document.getElementById('systemStatus').innerHTML = 'âœ… æ ‡ç­¾åˆ‡æ¢åŠŸèƒ½æ­£å¸¸';
                document.getElementById('systemStatus').className = 'status success';
            } else {
                log('âŒ switchTab æ–¹æ³•ä¸å­˜åœ¨', 'error');
            }
        }
        
        function testRealTimeUpdates() {
            log('æµ‹è¯•å®æ—¶æ›´æ–°åŠŸèƒ½...', 'info');
            
            if (window.adminPanel && typeof window.adminPanel.startRealTimeUpdates === 'function') {
                log('âœ… startRealTimeUpdates æ–¹æ³•å­˜åœ¨', 'success');
                document.getElementById('systemStatus').innerHTML = 'âœ… å®æ—¶æ›´æ–°åŠŸèƒ½æ­£å¸¸';
                document.getElementById('systemStatus').className = 'status success';
            } else {
                log('âŒ startRealTimeUpdates æ–¹æ³•ä¸å­˜åœ¨', 'error');
            }
        }
        
        function clearTestLog() {
            document.getElementById('testLog').innerHTML = '';
            log('æµ‹è¯•æ—¥å¿—å·²æ¸…ç©º', 'info');
        }
        
        function runAllTests() {
            log('ğŸš€ å¼€å§‹è¿è¡Œå…¨éƒ¨æµ‹è¯•...', 'info');
            
            setTimeout(() => testAdminAccess(), 200);
            setTimeout(() => testDataLoading(), 800);
            setTimeout(() => testUserDataGeneration(), 1400);
            setTimeout(() => testStatisticsUpdate(), 2000);
            setTimeout(() => testUserManagement(), 2600);
            setTimeout(() => testUserTableRender(), 3200);
            setTimeout(() => testIPTracking(), 3800);
            setTimeout(() => testEventBinding(), 4400);
            
            log('âœ… å…¨éƒ¨æµ‹è¯•å·²å¯åŠ¨ï¼Œè¯·æŸ¥çœ‹å„é¡¹ç»“æœ', 'success');
        }
        
        function openAdminPage() {
            window.open('/admin.html', '_blank');
            log('å·²å°è¯•æ‰“å¼€ç®¡ç†é¡µé¢', 'info');
        }
        
        // é¡µé¢åŠ è½½æ—¶çš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            log('ç®¡ç†é¡µé¢åŠŸèƒ½æµ‹è¯•é¡µé¢åˆå§‹åŒ–å®Œæˆ', 'info');
            
            // è‡ªåŠ¨è¿è¡ŒåŸºç¡€æµ‹è¯•
            setTimeout(() => {
                testAdminAccess();
                testUserDataGeneration();
                testStatisticsUpdate();
            }, 1000);
        });
    </script>
</body>
</html>