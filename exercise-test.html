<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç»ƒä¹ ç³»ç»Ÿæµ‹è¯•</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .test-container { max-width: 800px; margin: 0 auto; padding: 20px; background: white; border-radius: 10px; }
        .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 8px; }
        button { margin: 5px; padding: 8px 15px; cursor: pointer; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ§ª ç»ƒä¹ ç³»ç»ŸåŠŸèƒ½æµ‹è¯•</h1>
        
        <div class="test-section">
            <h3>1. è„šæœ¬åŠ è½½æµ‹è¯•</h3>
            <div id="scriptTest" class="status">æ£€æµ‹ä¸­...</div>
        </div>
        
        <div class="test-section">
            <h3>2. å‡½æ•°å­˜åœ¨æ€§æµ‹è¯•</h3>
            <div id="functionTest" class="status">æ£€æµ‹ä¸­...</div>
        </div>
        
        <div class="test-section">
            <h3>3. é€‰æ‹©é¢˜åŠŸèƒ½æµ‹è¯•</h3>
            <button onclick="testChoiceFunction()">æµ‹è¯•é€‰æ‹©é¢˜</button>
            <div id="choiceTest" class="status">ç­‰å¾…æµ‹è¯•...</div>
        </div>
        
        <div class="test-section">
            <h3>4. æ¨¡æ‹ŸHTMLç»“æ„æµ‹è¯•</h3>
            <div id="testExerciseContainer">
                <div class="exercise-tabs">
                    <button onclick="testShowExerciseType('choice')">é€‰æ‹©é¢˜</button>
                    <button onclick="testShowExerciseType('judge')">åˆ¤æ–­é¢˜</button>
                </div>
                
                <div id="choice-exercises" class="exercise-type-section">
                    <div id="choiceContainer">æµ‹è¯•å®¹å™¨</div>
                    <button id="choiceNextBtn" onclick="testNextQuestion()">ä¸‹ä¸€é¢˜</button>
                </div>
                
                <div id="choiceProgress" style="width: 0%; height: 4px; background: blue;"></div>
                <div id="choiceProgressText">0/0</div>
                
                <div id="choiceFeedback" style="display:none;">åé¦ˆåŒºåŸŸ</div>
            </div>
            <div id="structureTest" class="status">HTMLç»“æ„å·²åˆ›å»º</div>
        </div>
        
        <div class="test-section">
            <h3>5. æ§åˆ¶å°æ—¥å¿—</h3>
            <p>è¯·æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹è¯¦ç»†æ—¥å¿—</p>
        </div>
    </div>

    <script>
        console.log('%cğŸ§ª å¼€å§‹æµ‹è¯•ç»ƒä¹ ç³»ç»Ÿ', 'color: blue; font-size: 16px;');
        
        // æµ‹è¯•1: è„šæœ¬åŠ è½½
        window.addEventListener('load', function() {
            setTimeout(() => {
                const scriptEl = document.getElementById('scriptTest');
                scriptEl.textContent = 'âœ… é¡µé¢åŠ è½½å®Œæˆ';
                scriptEl.className = 'status success';
                
                // æµ‹è¯•2: å‡½æ•°å­˜åœ¨æ€§
                testFunctions();
            }, 100);
        });
        
        function testFunctions() {
            const functions = [
                'showExerciseType',
                'nextChoiceQuestion', 
                'nextJudgeQuestion',
                'restartAllExercises',
                'showExerciseReview'
            ];
            
            let results = [];
            let allExists = true;
            
            functions.forEach(funcName => {
                if (typeof window[funcName] === 'function') {
                    results.push(`âœ… ${funcName}: å­˜åœ¨`);
                    console.log(`âœ… å‡½æ•° ${funcName} å­˜åœ¨`);
                } else {
                    results.push(`âŒ ${funcName}: ä¸å­˜åœ¨`);
                    console.error(`âŒ å‡½æ•° ${funcName} ä¸å­˜åœ¨`);
                    allExists = false;
                }
            });
            
            const testEl = document.getElementById('functionTest');
            testEl.innerHTML = results.join('<br>');
            testEl.className = allExists ? 'status success' : 'status error';
        }
        
        function testChoiceFunction() {
            const testEl = document.getElementById('choiceTest');
            try {
                if (typeof loadChoiceQuestion === 'function') {
                    console.log('ğŸ§ª æµ‹è¯• loadChoiceQuestion å‡½æ•°');
                    // ä¸ç›´æ¥è°ƒç”¨ï¼Œåªæ£€æŸ¥å­˜åœ¨æ€§
                    testEl.textContent = 'âœ… loadChoiceQuestion å‡½æ•°å­˜åœ¨';
                    testEl.className = 'status success';
                } else {
                    testEl.textContent = 'âŒ loadChoiceQuestion å‡½æ•°ä¸å­˜åœ¨';
                    testEl.className = 'status error';
                }
            } catch (error) {
                testEl.textContent = 'âŒ æµ‹è¯•å‡ºé”™: ' + error.message;
                testEl.className = 'status error';
                console.error('æµ‹è¯•é”™è¯¯:', error);
            }
        }
        
        function testShowExerciseType(type) {
            console.log(`ğŸ§ª æµ‹è¯•åˆ‡æ¢åˆ°ç»ƒä¹ ç±»å‹: ${type}`);
            if (typeof showExerciseType === 'function') {
                try {
                    showExerciseType(type);
                    console.log(`âœ… æˆåŠŸè°ƒç”¨ showExerciseType('${type}')`);
                } catch (error) {
                    console.error(`âŒ è°ƒç”¨ showExerciseType('${type}') å¤±è´¥:`, error);
                }
            } else {
                console.error('âŒ showExerciseType å‡½æ•°ä¸å­˜åœ¨');
            }
        }
        
        function testNextQuestion() {
            console.log('ğŸ§ª æµ‹è¯•ä¸‹ä¸€é¢˜åŠŸèƒ½');
            if (typeof nextChoiceQuestion === 'function') {
                try {
                    // ä¸ç›´æ¥è°ƒç”¨ï¼Œé¿å…å‡ºé”™
                    console.log('âœ… nextChoiceQuestion å‡½æ•°å¯è°ƒç”¨');
                } catch (error) {
                    console.error('âŒ nextChoiceQuestion è°ƒç”¨å¤±è´¥:', error);
                }
            } else {
                console.error('âŒ nextChoiceQuestion å‡½æ•°ä¸å­˜åœ¨');
            }
        }
        
        console.log('%cğŸ§ª æµ‹è¯•å‡†å¤‡å®Œæˆï¼Œç­‰å¾…é¡µé¢åŠ è½½', 'color: green;');
    </script>
    
    <!-- å¼•å…¥ç»ƒä¹ ç³»ç»Ÿè„šæœ¬ -->
    <script src="grammar-exercises.js"></script>
</body>
</html>